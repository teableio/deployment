# ============================================
# Teable Azure AKS Deployment Configuration
# ============================================
# 
# Usage:
#   1. Copy this file: cp terraform.tfvars.example terraform.tfvars
#   2. Edit the required settings below
#   3. Run deployment: ./deploy.sh
#
# ============================================

# --------------------------------------------
# ðŸ”´ Required Settings
# --------------------------------------------

# Environment type
# - dev: Development environment (low cost)
# - staging: Staging environment
# - prod: Production environment
environment = "prod"

# Azure region
# Common regions:
# - eastasia: East Asia (Hong Kong)
# - southeastasia: Southeast Asia (Singapore)
# - japaneast: Japan East (Tokyo)
# - koreacentral: Korea Central (Seoul)
# - eastus: East US
# - westeurope: West Europe
location = "eastasia"

# Your domain name
# âš ï¸ Change this to your own domain!
teable_domain = "teable.example.com"


# --------------------------------------------
# ðŸŸ¢ Optional Settings - Resource Sizing
# These defaults are minimal but production-ready
# --------------------------------------------

# === AKS Cluster ===
# Default: 2 nodes x Standard_B2s (2 vCPU, 4GB each)
# aks_node_count = 2
# aks_node_size  = "Standard_B2s"

# === PostgreSQL ===
# Default: B_Standard_B2ms (2 vCPU, 8GB RAM)
# postgresql_sku        = "B_Standard_B2ms"
# postgresql_storage_mb = 32768  # 32GB

# === Redis Queue (for job queues) ===
# IMPORTANT: Queue data must NOT be lost!
# Default: Standard C1 (1GB) with noeviction policy
# - Standard tier: replication (high availability)
# - Premium tier: adds RDB/AOF persistence (disk backup)
# redis_queue_sku      = "Standard"
# redis_queue_family   = "C"
# redis_queue_capacity = 1

# Premium tier persistence (optional, for maximum durability)
# redis_queue_sku         = "Premium"
# redis_queue_family      = "P"
# redis_queue_capacity    = 1
# redis_queue_rdb_enabled = true
# redis_queue_rdb_frequency = 60  # Backup every 60 minutes

# === Redis Cache (for performance caching) ===
# Default: Standard C1 (1GB)
# redis_cache_sku      = "Standard"
# redis_cache_family   = "C"
# redis_cache_capacity = 1

# === MinIO Storage ===
# minio_storage_size = "50Gi"


# --------------------------------------------
# ðŸŸ¢ Optional Settings - Teable Application
# --------------------------------------------

# Teable version
# teable_image_tag = "latest"

# Pod resources (per pod)
# Default: 2 CPU, 4GB RAM limit
# teable_cpu_request    = "500m"
# teable_cpu_limit      = "2000m"    # 2 CPU
# teable_memory_request = "1Gi"
# teable_memory_limit   = "4Gi"      # 4GB

# Horizontal Pod Autoscaler (HPA)
# teable_hpa_enabled         = true
# teable_hpa_min_replicas    = 1
# teable_hpa_max_replicas    = 5
# teable_hpa_cpu_threshold   = 70    # Scale when CPU > 70%
# teable_hpa_memory_threshold = 80   # Scale when memory > 80%


# --------------------------------------------
# ðŸ“Š Resource Summary (with defaults)
# --------------------------------------------
# 
# Component         | Spec                | Est. Cost/Month
# ------------------|---------------------|----------------
# AKS Nodes (x2)    | 2 vCPU, 4GB each   | ~$60
# PostgreSQL        | 2 vCPU, 8GB        | ~$70
# Redis Queue       | 1GB Standard       | ~$40
# Redis Cache       | 1GB Standard       | ~$40
# MinIO Storage     | 50GB               | ~$5
# Load Balancer     | Standard           | ~$20
# ------------------|---------------------|----------------
# Total (estimated) |                    | ~$235/month
#
# Note: Actual costs may vary by region and usage.
